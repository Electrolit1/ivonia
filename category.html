<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Oficial IVONIA - Estilo SiphonMC</title>
    
    <!-- Carga de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Font Awesome para iconos (Usado por la lógica del carrito) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD5EblK+LbKWX655YHYYChR5R0t+S1k9YIHRy88E7K4NfR5L+2WjP+v9Gv9P4Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Carga de Fuente (Inter) y Iconos (Lucide) - Estilo SiphonMC -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Estilos Personalizados y Tema SiphonMC (Violeta) -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212; 
            color: #e5e7eb;
            /* Usamos un placeholder para el fondo oscuro */
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('img/wallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .color-primary {
            color: #a855f7; /* Violeta 500 */
        }
        .bg-primary {
            background-color: #a855f7; 
        }
        .bg-primary:hover {
            background-color: #9333ea; /* Violeta 600 */
        }
        .border-primary {
            border-color: #a855f7;
        }

        /* CORRECCIÓN: Aumento de ancho máximo para pantallas grandes */
        .main-container {
            max-width: 1500px; /* Incrementado de 1100px a 1500px */
            width: 95%;
            margin: 0 auto;
        }
        
        /* Estilo para tarjetas de contenido (Sidebar, Productos) */
        .content-card {
            background-color: rgba(26, 26, 26, 0.85); /* Gris oscuro semi-transparente */
            backdrop-filter: blur(5px);
            border: 1px solid #333333;
            border-radius: 12px;
            transition: transform 0.3s, border-color 0.3s;
        }
        .content-card:hover {
            transform: translateY(-3px);
            border-color: #a855f7; /* Borde púrpura al pasar el ratón */
        }

        /* Estilo para botones */
        .btn-main {
            background-color: #a855f7; 
            color: #1f2937;
            font-weight: 700;
            border-radius: 8px;
            transition: background-color 0.3s, transform 0.1s;
            padding: 8px 16px;
        }
        .btn-main:hover {
            background-color: #9333ea; 
            transform: translateY(-1px);
        }
        
        /* Estilo para la barra lateral (Sidebar) */
        .sidebar-link:hover {
            background-color: rgba(168, 85, 247, 0.1);
            color: #a855f7;
        }
        .sidebar-link.active-category {
            background-color: rgba(168, 85, 247, 0.2);
            color: #a855f7 !important;
            font-weight: 700;
            border-left: 3px solid #a855f7;
        }

        /* Estilo Modal del Carrito */
        .cart-modal {
            transition: transform 0.3s ease-out;
            transform: translateX(100%);
            background-color: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(10px);
            border-left: 1px solid #333;
        }
        .cart-modal.open {
            transform: translateX(0);
        }

        /* Animación para sacudir un elemento (para errores) */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.5s;
        }
    </style>
</head>
<body class="min-h-screen pt-8 pb-12">

<nav class="main-container flex justify-between items-center py-4 mb-16">
    <!-- Logo 64x64 -->
    <a href="index.html" class="block rounded-full overflow-hidden border-2 border-violet-500 shadow-lg transition duration-300 hover:scale-105 hover:shadow-violet-400/70">
        <img 
            src="img/ivonia.png" 
            alt="Logo IVONIA" 
            class="w-16 h-16 object-cover" 
            loading="lazy"
            onerror="this.onerror=null; this.src='https://placehold.co/64x64/a855f7/ffffff?text=IVONIA'"
        >
    </a>
        
        <!-- Navegación Central -->
        <div class="hidden md:flex flex-wrap justify-center space-x-6 text-lg font-semibold bg-black/50 p-3 rounded-full border border-gray-700">
            <a href="index.html" class="text-white hover:color-primary transition duration-150 px-2 py-1">HOME</a>
            <a href="forum.html" class="text-white hover:color-primary transition duration-150 px-2 py-1">FORUM</a>
            <a href="wiki.html" class="text-white hover:color-primary transition duration-150 px-2 py-1">WIKI</a>
            <a href="category.html" class="text-white bg-violet-600/30 rounded-full hover:bg-violet-600/50 transition duration-150 px-4 py-1 border border-violet-500">STORE</a>
        </div>

        <!-- Botón del Carrito -->
        <button onclick="openCart()" class="btn-main relative text-sm font-bold rounded-lg">
            <i class="fas fa-shopping-cart mr-2"></i> Carrito 
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full">0</span>
        </button>
    </nav>


    <!-- 2. CONTENIDO PRINCIPAL: SIDEBAR Y PRODUCTOS -->
    <div class="main-container flex flex-col md:flex-row gap-8 pb-20">
        
        <!-- 2.1. SIDEBAR DE CATEGORÍAS -->
        <aside class="content-card w-full md:w-64 p-6 h-fit shrink-0">
            <h3 class="text-xl font-bold color-primary mb-4 border-b border-gray-700 pb-2">
                <i class="fas fa-list-ul mr-2"></i> CATEGORÍAS
            </h3>
            <nav class="space-y-2 text-gray-300">
                <a href="#" class="sidebar-link flex items-center p-2 rounded-lg transition active-category" data-category="Todos" onclick="filterProducts('Todos')">
                    <i data-lucide="layout-grid" class="w-5 h-5 mr-3"></i> Todos los Ítems
                </a>
                <a href="#" class="sidebar-link flex items-center p-2 rounded-lg transition" data-category="Ranks" onclick="filterProducts('Ranks')">
                    <i data-lucide="crown" class="w-5 h-5 mr-3"></i> Ranks VIP
                </a>
                <a href="#" class="sidebar-link flex items-center p-2 rounded-lg transition" data-category="Llaves" onclick="filterProducts('Llaves')">
                    <i data-lucide="key" class="w-5 h-5 mr-3"></i> Llaves de Cajas
                </a>
                <a href="#" class="sidebar-link flex items-center p-2 rounded-lg transition" data-category="Comandos" onclick="filterProducts('Comandos')">
                    <i data-lucide="terminal" class="w-5 h-5 mr-3"></i> Comandos
                </a>
                <a href="#" class="sidebar-link flex items-center p-2 rounded-lg transition" data-category="Kits" onclick="filterProducts('Kits')">
                    <i data-lucide="box" class="w-5 h-5 mr-3"></i> Kits de Inicio
                </a>
                <a href="#" class="sidebar-link flex items-center p-2 rounded-lg transition" data-category="Otros" onclick="filterProducts('Otros')">
                    <i data-lucide="gem" class="w-5 h-5 mr-3"></i> Cosméticos y Otros
                </a>
            </nav>
        </aside>

        <!-- 2.2. ÁREA DE PRODUCTOS (Grid) -->
        <main class="flex-1">
            <h2 class="text-3xl font-extrabold text-white mb-8" id="category-title">
                <i class="fas fa-cubes mr-2"></i> TODOS LOS ÍTEMS
            </h2>
            
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">
                <!-- Las tarjetas de producto se inyectarán aquí -->
            </div>
        </main>
    </div>
            
    <!-- 3. FOOTER -->
    <footer class="main-container mt-20 text-center text-gray-600 pt-8 w-full border-t border-gray-800">
        <p class="text-xs mb-4">
            IVONIA NETWORK © 2025. Juega en: <span class="text-white font-mono">mc.ivonia.us</span>
        </p>
        <div class="space-x-4 text-sm">
            <a href="#" class="hover:text-white">Términos de Servicio</a>
            <a href="#" class="hover:text-white">Política de Privacidad</a>
        </div>
    </footer>


    <!-- 4. MODAL DEL CARRITO (Cart Modal) -->
    <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-70 z-40 hidden" onclick="closeCart()"></div>
    
    <div id="cart-modal" class="cart-modal fixed top-0 right-0 w-full sm:w-96 h-full z-50 overflow-y-auto p-6 flex flex-col">
        
        <div class="flex justify-between items-center border-b border-gray-700 pb-4 mb-4">
            <h2 class="text-2xl font-bold color-primary">
                <i class="fas fa-shopping-cart mr-2"></i> Tu Carrito
            </h2>
            <button onclick="closeCart()" class="text-gray-400 hover:text-white transition text-3xl">
                &times;
            </button>
        </div>

        <!-- Lista de Items del Carrito -->
        <div class="flex-1 space-y-4 overflow-y-auto pr-2 mb-4">
            <!-- Mensaje de Carrito Vacío -->
            <p id="empty-cart-message" class="text-center text-gray-500 mt-10">Tu carrito está vacío. ¡Añade algo!</p>
            <!-- Contenedor de Items -->
            <div id="cart-items-container" class="space-y-4">
                <!-- Items se renderizarán aquí -->
            </div>
        </div>

        <!-- Aplicación de Códigos y Tarjetas -->
        <div class="space-y-3 py-4 border-t border-gray-700">
            <div class="flex space-x-2">
                <input type="text" id="discount-input" placeholder="Código de Descuento" class="flex-1 p-2 bg-gray-700 text-white rounded-md placeholder-gray-400 text-sm border border-gray-600 focus:border-primary focus:ring-0 outline-none">
                <button onclick="applyDiscount()" class="btn-secondary text-sm bg-gray-700 hover:bg-gray-600 transition">
                    Aplicar
                </button>
            </div>

        <!-- Resumen de la Factura -->
        <div class="py-4 border-t border-gray-700 space-y-1 text-sm font-medium">
            <h3 class="font-bold color-primary mb-2">Factura de Compra</h3>
            <div class="flex justify-between text-gray-400">
                <span>Subtotal:</span>
                <span id="subtotal-amount">$0.00</span>
            </div>
            <div class="flex justify-between text-red-400">
                <span>Descuento:</span>
                <span id="discount-amount">-$0.00</span>
            </div>
            <div class="flex justify-between text-green-400">
                <span>Tarjeta de Regalo (<span id="giftcard-balance">$0.00</span>):</span>
                <span id="giftcard-used">-$0.00</span>
            </div>
            <div class="flex justify-between text-gray-400 border-t border-dashed border-gray-600 pt-1">
                <span>IVA (3%):</span>
                <span id="tax-amount">$0.00</span>
            </div>
        </div>
        
        <!-- SECCIÓN: Confirmación de Usuario de Minecraft -->
        <div id="username-confirmation-section" class="py-4 border-t border-gray-500">
            <h3 class="text-lg font-bold text-white mb-3">
                <i data-lucide="user-check" class="w-5 h-5 inline-block mr-2 color-primary"></i> Confirmar Usuario
            </h3>
            
            <div id="username-input-area">
                <p class="text-sm text-gray-400 mb-2">Ingresa tu nombre de usuario de Minecraft (distingue mayúsculas/minúsculas).</p>
                <div class="flex space-x-2">
                    <input type="text" id="minecraft-username" placeholder="Tu Nick de Minecraft" class="flex-1 p-2 bg-gray-700 text-white rounded-md placeholder-gray-400 text-sm border border-gray-600 focus:border-primary focus:ring-0 outline-none">
                    <button id="confirm-username-btn" onclick="confirmUsername()" class="btn-main text-sm">
                        Confirmar
                    </button>
                </div>
            </div>

            <div id="username-display-area" class="hidden">
                <p class="text-sm text-gray-400">Comprando para el usuario:</p>
                <div class="flex justify-between items-center">
                    <p id="username-status" class="text-lg font-bold text-green-400"></p>
                    <button onclick="editUsername()" class="text-xs text-gray-400 hover:text-white underline">(Editar)</button>
                </div>
            </div>
        </div>

        <!-- Total a Pagar y Botón de Checkout (PayPal) -->
        <div class="pt-4 border-t border-gray-700">
            <div class="flex justify-between text-2xl font-bold mb-4">
                <span class="text-white">TOTAL:</span>
                <span id="total-payable" class="color-primary">$0.00</span>
            </div>
            
            <!-- El botón de PayPal está deshabilitado por defecto hasta confirmar usuario -->
            <button id="checkout-btn" onclick="checkout()" class="w-full bg-[#FFC439] text-[#1F2937] px-5 py-3 text-lg font-bold rounded-lg transition
                                                                  hover:bg-yellow-500
                                                                  disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed"
                    disabled>
                <i class="fab fa-paypal mr-2"></i> Pagar con PayPal
            </button>
            <p id="checkout-message" class="text-xs text-red-400 mt-2 text-center">
                Por favor, confirma tu usuario de Minecraft para pagar.
            </p>
        </div>

            <div id="promo-float" class="fixed bottom-4 left-4 z-50 p-3 bg-red-700 rounded-lg shadow-2xl border-2 border-red-400 transform transition-transform duration-500 opacity-0 scale-95 hover:scale-100 cursor-pointer" onclick="this.classList.add('opacity-0', 'scale-95');">
        <div class="flex items-center space-x-3">
            <i class="fas fa-percent text-xl text-yellow-300 animate-pulse"></i>
            <div>
                <p class="text-sm font-bold text-white">¡Descuento por Tiempo Limitado!</p>
                <p class="text-xs text-red-100">Usa el código <span class="font-mono bg-red-800 px-1 py-0.5 rounded text-yellow-300 font-extrabold">IVONIAMC</span> para un <span class="font-extrabold">25% OFF</span>.</p>
            </div>
            <button class="text-white hover:text-red-300 text-lg ml-2" aria-label="Cerrar">
                &times;
            </button>
        </div>
    </div>

    </div>


    <script src="js/logic.js"></script> 

</body>
</html>